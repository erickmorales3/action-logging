<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Action Logging - Grails Plugin : Simplest debugging and better application security">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Action Logging - Grails Plugin</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/erickmorales3/action-logging">View on GitHub</a>

          <h1 id="project_title">Action Logging - Grails Plugin</h1>
          <h2 id="project_tagline">Simplest debugging and better application security</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/erickmorales3/action-logging/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/erickmorales3/action-logging/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="action-logging---grails-plugin" class="anchor" href="#action-logging---grails-plugin" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Action Logging - Grails Plugin</h1>

<p>Store detailed log of controller actions in database including controller name, action name, start-end time, total time (seconds), exceptions, custom messages and more.</p>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h2>

<p>It's specially useful to developers and system administrators, because it store custom messages, exceptions and execution time. This allows to know application weaknesses to correct it before user report. In addition, it allows to identify the current user to create  a user action history.</p>

<p>Please see <a href="https://grails.org/plugin/action-logging">https://grails.org/plugin/action-logging</a></p>

<h2>
<a id="grails-version" class="anchor" href="#grails-version" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Grails Version</h2>

<p>2.* &gt;</p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install</h2>

<p>Dependency:</p>

<div class="highlight highlight-source-java"><pre>compile <span class="pl-s"><span class="pl-pds">"</span>:action-logging:1.1.1<span class="pl-pds">"</span></span></pre></div>

<h2>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use</h2>

<p>Import some annotation classes on the controller where you want to enable Action Logging.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.mirzsoft.grails.actionlogging.annotation.*</span></pre></div>

<p>Add @ActionLogging annotation</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {

}</pre></div>

<p>This way, will store a log of all existing actions in controller and the result can be seen navigating to http://your/app/path/actionLoggingEvent/index</p>

<p><img src="images/actionLoggingEventList.png" alt="alt tag"></p>

<h2>
<a id="some-examples" class="anchor" href="#some-examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Some examples</h2>

<h4>
<a id="enable-action-logging-to-all-controller-actions-except-to-specific-one" class="anchor" href="#enable-action-logging-to-all-controller-actions-except-to-specific-one" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Enable Action Logging to all controller actions except to specific one</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {

    def <span class="pl-en">index</span>(){

    }

    <span class="pl-k">@ActionLogging</span>(<span class="pl-c1">false</span>)
    def <span class="pl-en">methodWithoutActionLogging</span>(){

    }
}</pre></div>

<h4>
<a id="enable-action-logging-to-specific-controller-action" class="anchor" href="#enable-action-logging-to-specific-controller-action" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Enable Action Logging to specific controller action</h4>

<div class="highlight highlight-source-java"><pre>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {

    def <span class="pl-en">index</span>(){

    }

    <span class="pl-k">@ActionLogging</span>
    def <span class="pl-en">methodWithActionLogging</span>(){

    }
}</pre></div>

<h4>
<a id="adding-custom-log-messages" class="anchor" href="#adding-custom-log-messages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Adding custom log messages</h4>

<p>Inject actionLoggingService class:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 1<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 2<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<h4>
<a id="managing-custom-log-messages-with-logger-implementation" class="anchor" href="#managing-custom-log-messages-with-logger-implementation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Managing custom log messages with Logger implementation</h4>

<p>By default custom messages are only visible in Action Logging Event List screen or in action_loging database table, but is possible manage log levels and incorporate it with your own log implementation like logback, log4j, etc. Adding the @PrintCustomLog annotation and importing LoggingLevel class:</p>

<ul>
<li>To all controller actions</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.mirzsoft.grails.actionlogging.Constants.LoggingLevel</span>

<span class="pl-k">@ActionLogging</span>
<span class="pl-k">@PrintCustomLog</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 1 - printed<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 2 - printed<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<ul>
<li>To all controller actions except to specific one</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.mirzsoft.grails.actionlogging.Constants.LoggingLevel</span>

<span class="pl-k">@ActionLogging</span>
<span class="pl-k">@PrintCustomLog</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 1 - printed<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 2 - printed<span class="pl-pds">"</span></span>)
    }

    <span class="pl-k">@PrintCustomLog</span>(<span class="pl-c1">false</span>)
    def methodWithoutCustomPrint(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 3<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 4<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<ul>
<li>To specific controller action</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.mirzsoft.grails.actionlogging.Constants.LoggingLevel</span>

<span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 1<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-s"><span class="pl-pds">"</span>A custom log message 2<span class="pl-pds">"</span></span>)
    }

    <span class="pl-k">@PrintCustomLog</span>
    def methodWithCustomPrint(){
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 3 - printed<span class="pl-pds">"</span></span>)
        actionLoggingService<span class="pl-k">.</span>log(<span class="pl-smi">LoggingLevel</span><span class="pl-c1"><span class="pl-k">.</span>INFO</span>, <span class="pl-s"><span class="pl-pds">"</span>A custom log message 4 - printed<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<p>Available Logging levels: TRACE, DEBUG, INFO, WARN, ERROR.</p>

<p>Note: If level is not specified, custom messages will printed using println function.</p>

<h4>
<a id="setting-action-type-to-all-controller-actions" class="anchor" href="#setting-action-type-to-all-controller-actions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting action type to all controller actions</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">@ActionType</span>(<span class="pl-s"><span class="pl-pds">"</span>Administrator/Supervisor Actions<span class="pl-pds">"</span></span>)
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {

}</pre></div>

<h4>
<a id="identifying-current-user-with-spring-security-core-plugin" class="anchor" href="#identifying-current-user-with-spring-security-core-plugin" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Identifying current user with Spring Security Core Plugin</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">@SpringUserIdentification</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {

}</pre></div>

<h4>
<a id="identifying-current-user-without-spring-security-core-plugin" class="anchor" href="#identifying-current-user-without-spring-security-core-plugin" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Identifying current user without Spring Security Core Plugin</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>setUserId(<span class="pl-c1">3</span>)
    }
}</pre></div>

<h4>
<a id="setting-custom-action-name" class="anchor" href="#setting-custom-action-name" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting custom action name</h4>

<ul>
<li>Using @CustomActionName annotation</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    <span class="pl-k">@CustomActionName</span>(<span class="pl-s"><span class="pl-pds">"</span>Custom action name<span class="pl-pds">"</span></span>)
    def <span class="pl-en">index</span>(){

    }
}</pre></div>

<ul>
<li>Using actionLoggingService class</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>setCustomActionName(<span class="pl-s"><span class="pl-pds">"</span>Custom action name<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<h4>
<a id="setting-action-type-to-specific-action" class="anchor" href="#setting-action-type-to-specific-action" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting action type to specific action</h4>

<ul>
<li>Using @ActionType annotation</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    <span class="pl-k">@ActionType</span>(<span class="pl-s"><span class="pl-pds">"</span>Administrator Action<span class="pl-pds">"</span></span>)
    def <span class="pl-en">index</span>(){

    }
}</pre></div>

<ul>
<li>Using actionLoggingService class</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        actionLoggingService<span class="pl-k">.</span>setActionType(<span class="pl-s"><span class="pl-pds">"</span>Administrator Action<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<p>It overrides action type defined in class declaration.</p>

<h4>
<a id="setting-handled-exception-in-try-catch-block" class="anchor" href="#setting-handled-exception-in-try-catch-block" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting handled exception in try catch block</h4>

<p>The handled exception in try catch block are omited, but is posible setting an exception object manually, as follows:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@ActionLogging</span>
<span class="pl-k">class</span> <span class="pl-en">SampleController</span> {
    def actionLoggingService

    def index(){
        <span class="pl-k">try</span> {
            def a <span class="pl-k">=</span> <span class="pl-c1">1</span> <span class="pl-k">/</span> <span class="pl-c1">0</span>
        } <span class="pl-k">catch</span> (ex) {
            actionLoggingService<span class="pl-k">.</span>setCustomException(ex)
        }
    }
}</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>MIT License</p>

<h3>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h3>

<ul>
<li>
<a href="https://github.com/burtbeckwith" class="user-mention">@burtbeckwith</a> </li>
<li><a href="https://github.com/rpalcolea" class="user-mention">@rpalcolea</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Action Logging - Grails Plugin maintained by <a href="https://github.com/erickmorales3">erickmorales3</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
